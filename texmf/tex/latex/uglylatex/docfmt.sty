% 正文字体
%
% 西文字体
\setmainfont{Times New Roman}

% 中文字体不需要额外设置，CTeX 已经解决了兼容性问题

% 额外的字体设置：有些情况下会使用的字体
%
% 使用思源宋体粗体作为标题字体，因为方正小标宋需要版权
\setCJKfamilyfont{shserifbold}{Source Han Serif SC Bold}

% 正文格式设置
\setlength{\parindent}{1em}
\linespread{1.25}
% \setlength{\parskip}{0pt plus 1pt}
\setlength{\parskip}{0pt}

% 列表项左侧顶格写
% 理论上，itemsep=0pt 或者 itemsep=0pt 可以设置 
% itemize 和 enumerate 的每一项间距等于行距，但实际上
% 这个设置和精美的带阴影的球的 item label 不兼容。
\setlist[itemize]{
  % itemsep=0pt，
  noitemsep,
  leftmargin=*
}
\setlist[enumerate]{
  % itemsep=0pt，
  noitemsep,
  leftmargin=*
}

% 多级列表格式设置
% 设置一组列表项格式为带阴影的球，用于 itemize 环境。
\usetikzlibrary{shadows}
\newcommand*{\eitemi}{
  \tikz\draw[baseline,ball color=ecolor,draw=none] circle (2pt);}
\newcommand*{\eitemii}{
  \tikz\draw[
    baseline,
    fill=ecolor,
    draw=none,
    circular drop shadow
    ] circle (2pt);}
\newcommand*{\eitemiii}{%
  \tikz\draw[baseline,fill=ecolor,draw=none] circle (2pt);}

% 有序列表启用多级不同序号样式
\setlist[enumerate,1]{label=\color{ecolor}\arabic*.}
\setlist[enumerate,2]{label=\color{ecolor}(\alph*).}
\setlist[enumerate,3]{label=\color{ecolor}\Roman*.}
\setlist[enumerate,4]{label=\color{ecolor}\Alph*.}

% 无序列表启用更精致的 label 项
\setlist[itemize,1]{label={\eitemi}}
\setlist[itemize,2]{label={\eitemii}}
\setlist[itemize,3]{label={\eitemiii}}

% 全文字号参数传递
\RequirePackage[\UGLY@fontsize]{extsizes}

% 字体格式处理
\ifcsname kaishu\endcsname
  \newcommand{\citshape}{\kaishu}
\else
  \newcommand{\citshape}{\itshape}
\fi
\ifcsname kaishu\endcsname
  \newcommand{\cnormal}{\kaishu}
\else
  \newcommand{\cnormal}{\normalfont}
\fi
\ifcsname fangsong\endcsname
  \newcommand{\cfs}{\fangsong}
\else
  \newcommand{\cfs}{\normalfont}
\fi

% 代码环境定制
% 定义颜色
\definecolor{commentgreen}{RGB}{0,100, 0}
% \definecolor{lightgrey}{HTML}{EEEEEE}
% 设置代码环境
\lstset{
  basicstyle=\small\ttfamily, % 整体的字号、字体
  backgroundcolor=\color{white}, % 背景颜色
  % frame=trbl, %显示各方向的代码框线条
  frame=tb, %显示各方向的代码框线条，只保留上和下
  framerule=1pt,
  rulecolor=\color{ecolor},
  % frameround=tttt, % 设置代码框各棱角的形状
  showstringspaces=false, % 取消特别的字符间距
  framexleftmargin=5pt, % 内部左边距
  keywordstyle=\color{blue},
  commentstyle=\color{commentgreen},
  stringstyle=\color{red},
  numberstyle=\small\color{ecolor},
  stepnumber=1,
  numbersep=5pt,
  showspaces=false,
  showstringspaces=false,
  breaklines=true,
  breakatwhitespace=true,
  breakautoindent=true,
  % linewidth=\textwidth,
  % numberbychapter=true,
  xleftmargin=1em, % 左右两侧的空白
  xrightmargin=1em,
}

% minted 宏包的换行选项，从技术上来说，将这两行代码加入到 Markdown YAML Header
% 的 `header-include` 参数当中可以允许 `minted` 环境换行，
% 但是因为暂时默认不使用 `minted` 而是使用 `listing`，暂时注释掉了。
% \DefineVerbatimEnvironment{Highlighting}{Verbatim}{
%   breaklines,
%   commandchars=\\\{\}
% }

% 表格格式设置
\arrayrulecolor{ecolor} % 将所有表格线设为 ecolor